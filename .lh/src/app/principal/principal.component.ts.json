{
    "sourceFile": "src/app/principal/principal.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1699431047992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1699431695152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\n import { FormControl, FormGroup } from '@angular/forms';\r\n import { TablaComponent } from '../tabla/tabla.component';\r\n import { OperacionesService } from '../services/operaciones.service';\r\n+import { EditorService } from '../services/editor.service';\r\n \r\n @Component({\r\n   selector: 'app-principal',\r\n   templateUrl: './principal.component.html',\r\n@@ -17,9 +18,9 @@\n   data: any[] = [];\r\n   data_aux: any[] = [];\r\n \r\n \r\n-  constructor(private cdr: ChangeDetectorRef, private operaciones: OperacionesService) {\r\n+  constructor(private cdr: ChangeDetectorRef, private operaciones: OperacionesService,private editor: EditorService) {\r\n \r\n   }\r\n   async ngOnInit() {\r\n     let dat: any = await this.operaciones.lsKey();\r\n@@ -33,8 +34,12 @@\n       });\r\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n+    this.editor.$modal.subscribe((valor) => {\r\n+      this.anadir = valor;\r\n+      this.cdr.detectChanges();\r\n+    })\r\n   }\r\n   btnAnadir() {\r\n     this.anadir = true;\r\n     this.cdr.detectChanges();\r\n"
                },
                {
                    "date": 1699431753402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,10 @@\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n+      let save = this.operaciones.lsKey();\r\n+      this.tableComponent.updateDatos(save);\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1699431880470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,10 +35,10 @@\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n-      let save = this.operaciones.lsKey();\r\n-      this.tableComponent.updateDatos(save);\r\n+      // let save = this.operaciones.lsKey();\r\n+      // this.tableComponent.updateDatos(save);\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1699431986596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,8 +37,9 @@\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n       // let save = this.operaciones.lsKey();\r\n       // this.tableComponent.updateDatos(save);\r\n+      location.reload();\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1699432027820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,8 @@\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n       // let save = this.operaciones.lsKey();\r\n       // this.tableComponent.updateDatos(save);\r\n-      location.reload();\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1699432039462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,11 @@\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n-      // let save = this.operaciones.lsKey();\r\n+      let save = this.operaciones.lsKey();\r\n+      console.log(save);\r\n+      \r\n       // this.tableComponent.updateDatos(save);\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n"
                },
                {
                    "date": 1699432080393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,12 +35,12 @@\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n     this.editor.$modal.subscribe((valor) => {\r\n-      let save = this.operaciones.lsKey();\r\n+      let save = await this.operaciones.lsKey();\r\n       console.log(save);\r\n       \r\n-      // this.tableComponent.updateDatos(save);\r\n+      this.tableComponent.updateDatos(save);\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1699432086012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n       });\r\n       this.tableComponent.updateDatos(this.data_aux);\r\n       this.cdr.detectChanges();\r\n     });\r\n-    this.editor.$modal.subscribe((valor) => {\r\n+    this.editor.$modal.subscribe(async (valor) => {\r\n       let save = await this.operaciones.lsKey();\r\n       console.log(save);\r\n       \r\n       this.tableComponent.updateDatos(save);\r\n"
                },
                {
                    "date": 1699432152598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n       this.cdr.detectChanges();\r\n     });\r\n     this.editor.$modal.subscribe(async (valor) => {\r\n       let save = await this.operaciones.lsKey();\r\n-      console.log(save);\r\n+      save = save.data\r\n       \r\n       this.tableComponent.updateDatos(save);\r\n       this.anadir = valor;\r\n       this.cdr.detectChanges();\r\n"
                },
                {
                    "date": 1699432633639,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,7 +47,7 @@\n   btnAnadir() {\r\n     this.anadir = true;\r\n     this.cdr.detectChanges();\r\n   }\r\n+  \r\n \r\n-\r\n }\r\n"
                }
            ],
            "date": 1699431047992,
            "name": "Commit-0",
            "content": "import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { TablaComponent } from '../tabla/tabla.component';\r\nimport { OperacionesService } from '../services/operaciones.service';\r\n\r\n@Component({\r\n  selector: 'app-principal',\r\n  templateUrl: './principal.component.html',\r\n  styleUrls: ['./principal.component.scss']\r\n})\r\nexport class PrincipalComponent implements OnInit {\r\n  buscador: FormGroup = new FormGroup({\r\n    text: new FormControl('')\r\n  });\r\n  anadir: boolean = false;\r\n  @ViewChild(TablaComponent) tableComponent: TablaComponent | any;\r\n  data: any[] = [];\r\n  data_aux: any[] = [];\r\n\r\n\r\n  constructor(private cdr: ChangeDetectorRef, private operaciones: OperacionesService) {\r\n\r\n  }\r\n  async ngOnInit() {\r\n    let dat: any = await this.operaciones.lsKey();\r\n    this.data = dat.data;\r\n    this.data_aux = this.data;\r\n    this.tableComponent.updateDatos(this.data_aux);\r\n    this.buscador.valueChanges.subscribe((data) => {\r\n      const text = data.text;\r\n      this.data_aux = this.data.filter((item) => {\r\n        return item.usuario_correo.toLowerCase().includes(text);\r\n      });\r\n      this.tableComponent.updateDatos(this.data_aux);\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n  btnAnadir() {\r\n    this.anadir = true;\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n}\r\n"
        }
    ]
}